{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listFoods,deleteFood,createFood}from'../actions/foodActions';import{FOOD_CREATE_RESET}from'../constants/foodConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FoodListScreens=function FoodListScreens(_ref){var history=_ref.history;var dispatch=useDispatch();var foodList=useSelector(function(state){return state.foodList;});var loading=foodList.loading,error=foodList.error,foods=foodList.foods;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var foodDelete=useSelector(function(state){return state.foodDelete;});var loadingDelete=foodDelete.loading,errorDelete=foodDelete.error,successDelete=foodDelete.success;var foodCreate=useSelector(function(state){return state.foodCreate;});var loadingCreate=foodCreate.loading,errorCreate=foodCreate.error,successCreate=foodCreate.success,createdFood=foodCreate.food;useEffect(function(){dispatch({type:FOOD_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/food/\".concat(createdFood._id,\"/edit\"));}else{dispatch(listFoods());}},[dispatch,history,userInfo,successDelete,successCreate,createdFood]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure')){dispatch(deleteFood(id));}};var createFoodHandler=function createFoodHandler(){dispatch(createFood());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Foods\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createFoodHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Food\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"OWNED BY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LOCATION\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CONTACT\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:foods.map(function(food){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:food._id}),/*#__PURE__*/_jsx(\"td\",{children:food.name}),/*#__PURE__*/_jsx(\"td\",{children:food.owner}),/*#__PURE__*/_jsx(\"td\",{children:food.location}),/*#__PURE__*/_jsx(\"td\",{children:food.contact}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/food/\".concat(food._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(food._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},food._id);})})]})]});};export default FoodListScreens;","map":{"version":3,"sources":["C:/Users/Hemanth/Desktop/Vivokal/frontend/src/screens/FoodListScreens.js"],"names":["React","useEffect","LinkContainer","Table","Button","Row","Col","useDispatch","useSelector","Message","Loader","listFoods","deleteFood","createFood","FOOD_CREATE_RESET","FoodListScreens","history","dispatch","foodList","state","loading","error","foods","userLogin","userInfo","foodDelete","loadingDelete","errorDelete","successDelete","success","foodCreate","loadingCreate","errorCreate","successCreate","createdFood","food","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createFoodHandler","map","name","owner","location","contact"],"mappings":"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","sourcesContent":["import React ,{useEffect} from 'react'\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport {Table,Button,Row,Col} from 'react-bootstrap'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\n\r\nimport {listFoods, deleteFood,createFood} from '../actions/foodActions'\r\nimport {FOOD_CREATE_RESET} from '../constants/foodConstants'\r\n\r\nconst FoodListScreens = ({history}) => {\r\n\r\n\r\n    const dispatch= useDispatch()\r\n\r\n    const foodList= useSelector(state => state.foodList)\r\n    const {loading,error,foods}= foodList\r\n\r\n    const userLogin= useSelector(state => state.userLogin)\r\n    const {userInfo}= userLogin\r\n\r\n    const foodDelete= useSelector(state => state.foodDelete)\r\n    const {loading:loadingDelete,error:errorDelete,success:successDelete}= foodDelete\r\n\r\n    const foodCreate= useSelector(state => state.foodCreate)\r\n    const {loading:loadingCreate,error:errorCreate,success:successCreate,food:createdFood}= foodCreate\r\n\r\n    useEffect(()=>{\r\n        dispatch({type:FOOD_CREATE_RESET})\r\n\r\n        if(!userInfo.isAdmin) {\r\n            history.push('/login')\r\n        }\r\n\r\n        if(successCreate){\r\n            history.push(`/admin/food/${createdFood._id}/edit`)\r\n        } else {\r\n            dispatch(listFoods())\r\n        }\r\n\r\n    },[dispatch,history,userInfo,successDelete,successCreate,createdFood])\r\n\r\n    const deleteHandler= (id)=>{\r\n\r\n        if(window.confirm('Are you sure')){\r\n            dispatch(deleteFood(id))\r\n        }\r\n    }\r\n\r\n    const createFoodHandler= () =>{\r\n          dispatch(createFood())\r\n    }\r\n\r\n    return (\r\n        <>\r\n             <Row className='align-items-center'>\r\n                 <Col>\r\n                     <h1>Foods</h1>\r\n                 </Col>\r\n                 <Col className='text-right'>\r\n                     <Button className='my-3' onClick={createFoodHandler}>\r\n                        <i className='fas fa-plus'></i> Create Food\r\n                     </Button>\r\n                 </Col>\r\n             </Row>\r\n\r\n             {loadingDelete && <Loader />}\r\n             {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n             {loadingCreate && <Loader />}\r\n             {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n\r\n            {loading? <Loader />: error? <Message variant='danger'>{error}</Message>: (\r\n\r\n                <Table striped bordered hover responsive className='table-sm'>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>NAME</th>\r\n                            <th>OWNED BY</th>\r\n                            <th>LOCATION</th>\r\n                            <th>CONTACT</th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {foods.map(food =>(\r\n                            <tr key={food._id}>\r\n                                <td>{food._id}</td>\r\n                                <td>{food.name}</td>\r\n                                <td>{food.owner}</td>\r\n                                <td>\r\n                                  {food.location}\r\n                                </td>\r\n                                <td>{food.contact}</td>\r\n                                <td>\r\n                                    <LinkContainer to={`/admin/food/${food._id}/edit`}>\r\n\r\n                                    <Button variant='light' className='btn-sm'>\r\n                                        <i className='fas fa-edit'></i>\r\n                                    </Button>\r\n\r\n                                    </LinkContainer>\r\n                                    <Button variant='danger' className='btn-sm' onClick={()=> deleteHandler(food._id)}>\r\n                                        <i className='fas fa-trash'></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        )\r\n\r\n                        )}\r\n                    </tbody>\r\n                </Table>\r\n               \r\n                \r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FoodListScreens\r\n"]},"metadata":{},"sourceType":"module"}