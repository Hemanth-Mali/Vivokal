{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Hemanth/Desktop/Vivokal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Hemanth/Desktop/Vivokal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Image,ListGroup,Card,Button,Form,option}from'react-bootstrap';import Rating from'../components/Rating';import Loader from'../components/Loader';import Meta from'../components/Meta';import Message from'../components/Message';import{listProductDetails,createProductReview}from'../actions/productActions';import{PRODUCT_CREATE_REVIEW_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductScreens=function ProductScreens(_ref){var history=_ref.history,match=_ref.match;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productReviewCreate=useSelector(function(state){return state.productReviewCreate;});var successProductReview=productReviewCreate.success,errorProductReview=productReviewCreate.error;useEffect(function(){if(successProductReview){alert('Review Submitted');setRating(0);setComment('');dispatch({type:PRODUCT_CREATE_REVIEW_RESET});}dispatch(listProductDetails(match.params.id));},[dispatch,match,successProductReview]);var addToCartHandler=function addToCartHandler(){history.push(\"/cart/\".concat(match.params.id,\"?qty=\").concat(qty));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createProductReview(match.params.id,{rating:rating,comment:comment}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-dark my-3\",to:\"/products\",children:\"Go Back\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Meta,{title:product.name}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Image,{className:\"img-screens\",src:product.image,alt:product.name,fluid:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:product.name})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{value:product.rating,text:\"\".concat(product.numReviews,\" reviews \")})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\" Price: \\u20B9 \",product.price,\" \"]})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: \",product.description]})]})}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9 \",product.price]})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:product.countInStock>0?'In Stock':'Out Of Stock'})]})}),product.countInStock>0&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Qty\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:qty,onChange:function onChange(e){return setQty(e.target.value);},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{onClick:addToCartHandler,className:\"btn-block\",type:\"button\",disabled:product.countInStock===0,children:\"Add To Cart\"})})]})}),/*#__PURE__*/_jsxs(Card,{className:\"my-3 p-3 rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\" \"}),/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product._id,\"/seller\"),children:/*#__PURE__*/_jsx(Card.Img,{className:\"img-Change\",src:product.sellerImage,variant:\"top\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product._id,\"/seller\"),children:/*#__PURE__*/_jsx(Card.Title,{as:\"div\",children:/*#__PURE__*/_jsx(\"strong\",{children:product.sellerName})})}),/*#__PURE__*/_jsxs(Card.Text,{as:\"div\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contact:\"}),\" \",product.sellerContact]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product._id,\"/seller\"),children:/*#__PURE__*/_jsx(Card.Text,{as:\"div\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Read More\"})})})]})]})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reviews\"}),product.reviews.length===0&&/*#__PURE__*/_jsx(Message,{children:\"No Reviews\"}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[product.reviews.map(function(review){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:review.name}),/*#__PURE__*/_jsx(Rating,{value:review.rating}),/*#__PURE__*/_jsx(\"p\",{children:review.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"p\",{children:review.comment})]},review._id);}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Write a Customer Review\"}),errorProductReview&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorProductReview}),userInfo?/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"rating\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 - Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 - Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 - Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4 - Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5 - Excellent\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comment\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Comment\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",row:\"3\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Submit\"})]}):/*#__PURE__*/_jsxs(Message,{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Sign In\"}),\" to post a Review\"]})]})]})]})})]})]});};export default ProductScreens;","map":{"version":3,"sources":["C:/Users/Hemanth/Desktop/Vivokal/frontend/src/screens/ProductScreens.js"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","Button","Form","option","Rating","Loader","Meta","Message","listProductDetails","createProductReview","PRODUCT_CREATE_REVIEW_RESET","ProductScreens","history","match","qty","setQty","rating","setRating","comment","setComment","dispatch","productDetails","state","loading","error","product","userLogin","userInfo","productReviewCreate","successProductReview","success","errorProductReview","alert","type","params","id","addToCartHandler","push","submitHandler","e","preventDefault","name","image","numReviews","price","description","countInStock","target","value","Array","keys","map","x","_id","sellerImage","sellerName","sellerContact","reviews","length","review","createdAt","substring"],"mappings":"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","sourcesContent":["import React,{ useState,useEffect }from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Row, Col , Image , ListGroup, Card, Button, Form , option} from 'react-bootstrap'\r\nimport Rating from '../components/Rating'\r\nimport Loader from '../components/Loader'\r\nimport Meta from '../components/Meta'\r\nimport Message from '../components/Message'\r\n\r\nimport {listProductDetails,createProductReview} from '../actions/productActions'\r\nimport {PRODUCT_CREATE_REVIEW_RESET} from '../constants/productConstants'\r\n\r\nconst ProductScreens = ({history,match}) => {\r\n\r\n    const [qty,setQty]= useState(1)\r\n    const [rating,setRating]= useState(0)\r\n    const [comment,setComment]= useState('')\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const productDetails= useSelector(state=> state.productDetails)\r\n    const {loading,error,product}=productDetails\r\n\r\n    const userLogin= useSelector(state=> state.userLogin)\r\n    const {userInfo}=userLogin\r\n\r\n    const productReviewCreate= useSelector(state=> state.productReviewCreate)\r\n    const {success:successProductReview,error:errorProductReview}=productReviewCreate\r\n\r\n    useEffect(()=>{\r\n         if(successProductReview){\r\n             alert('Review Submitted')\r\n             setRating(0)\r\n             setComment('')\r\n             dispatch({type:PRODUCT_CREATE_REVIEW_RESET})\r\n         }\r\n\r\n        dispatch(listProductDetails(match.params.id))\r\n    }, [dispatch,match,successProductReview]) \r\n    \r\n    const addToCartHandler= () =>{\r\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\r\n    }\r\n\r\n    const submitHandler= (e) =>{\r\n        e.preventDefault()\r\n        dispatch(createProductReview(match.params.id,{\r\n            rating,\r\n            comment\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <>\r\n           <Link className=\"btn btn-dark my-3\" to=\"/products\">\r\n               Go Back\r\n           </Link>\r\n            {loading? (<Loader />) : error? (<Message variant='danger'>{error}</Message>):( \r\n                <>\r\n                <Meta title={product.name} />\r\n                <Row>\r\n               <Col md={6}>\r\n                <Image className=\"img-screens\"src={product.image} alt={product.name} fluid />\r\n               </Col>\r\n               <Col md={3}>\r\n                  <ListGroup variant='flush'>\r\n                   <ListGroup.Item>\r\n                       <h2>{product.name}</h2>\r\n                   </ListGroup.Item>\r\n                 <ListGroup.Item>\r\n                     <Rating value={product.rating} text={`${product.numReviews} reviews `} />\r\n                 </ListGroup.Item>\r\n                 <ListGroup.Item>\r\n                  <h3> Price: ₹ {product.price} </h3>\r\n                 </ListGroup.Item>\r\n                 <ListGroup.Item>\r\n                   Description: {product.description}\r\n                 </ListGroup.Item>\r\n                  </ListGroup>\r\n               </Col>\r\n               <Col md={3}>\r\n                   <Card>\r\n                       <ListGroup variant='flush'>\r\n                           <ListGroup.Item>\r\n                               <Row>\r\n                                   <Col>\r\n                                       Price:\r\n                                   </Col>\r\n                                   <Col>\r\n                                       <strong>₹ {product.price}</strong>\r\n                                   </Col>\r\n                               </Row>\r\n                           </ListGroup.Item> \r\n                           <ListGroup.Item>\r\n                               <Row>\r\n                                   <Col>\r\n                                       Status:\r\n                                   </Col>\r\n                                   <Col>\r\n                                       {product.countInStock>0 ? 'In Stock': 'Out Of Stock'}\r\n                                   </Col>\r\n                               </Row>\r\n                           </ListGroup.Item>  \r\n                           {product.countInStock>0 &&(\r\n                               <ListGroup.Item>\r\n                                   <Row>\r\n                                       <Col>\r\n                                           Qty\r\n                                       </Col>\r\n                                       <Col>\r\n                                           <Form.Control as='select' value={qty} onChange={(e)=>\r\n                                            setQty(e.target.value)}\r\n                                            >\r\n                                            {\r\n                                             [...Array(product.countInStock).keys()].map((x) =>(\r\n                                                <option key={x+1} value={x+1}>\r\n                                                    {x+1}\r\n                                                </option>\r\n                                            ))}\r\n                                           </Form.Control>\r\n                                       </Col>\r\n                                   </Row>\r\n                               </ListGroup.Item>\r\n                           )} \r\n                           <ListGroup.Item>\r\n                                    <Button  onClick={addToCartHandler} className='btn-block' type='button' disabled={product.countInStock===0}>\r\n                                           Add To Cart\r\n                                    </Button>\r\n                           </ListGroup.Item>\r\n                       </ListGroup>\r\n                   </Card>\r\n                   <Card className=\"my-3 p-3 rounded\">\r\n                   <h3> </h3>\r\n        <Link to={`/product/${product._id}/seller`}>\r\n            <Card.Img className=\"img-Change\"src={product.sellerImage} variant=\"top\" />\r\n        </Link>\r\n        <Card.Body>\r\n          <Link to={`/product/${product._id}/seller`}>\r\n            <Card.Title as='div'>\r\n                <strong>{product.sellerName}</strong>\r\n            </Card.Title>\r\n          </Link>\r\n        <Card.Text as=\"div\">\r\n         <strong>Contact:</strong> {product.sellerContact}\r\n        </Card.Text>\r\n        <br />\r\n        <Link to={`/product/${product._id}/seller`}>\r\n            <Card.Text as='div'>\r\n                <strong>Read More</strong>\r\n            </Card.Text>\r\n        </Link>\r\n        </Card.Body>\r\n        </Card>\r\n               </Col>\r\n           </Row>\r\n          <Row>\r\n               <Col md={6}>\r\n                   <h2>Reviews</h2>\r\n                   {product.reviews.length===0 && <Message>No Reviews</Message>} \r\n                   <ListGroup variant='flush'>\r\n                      {product.reviews.map(review => (\r\n                          <ListGroup.Item key={review._id}>\r\n                             <strong>{review.name}</strong>\r\n                             <Rating value={review.rating} />\r\n                             <p>{review.createdAt.substring(0,10)}</p>\r\n                             <p>{review.comment}</p>\r\n                          </ListGroup.Item>\r\n                      ))}\r\n                      <ListGroup.Item>\r\n                          <h2>Write a Customer Review</h2>\r\n                          {errorProductReview && <Message variant='danger'>{errorProductReview}</Message>}\r\n                          {userInfo? (\r\n                              <Form onSubmit={submitHandler}>\r\n                                  <Form.Group controlId='rating'>\r\n                                      <Form.Label>Rating</Form.Label>\r\n                                      <Form.Control as='select' value={rating} onChange={(e) => setRating(e.target.value)}>\r\n                                          <option value=''>Select...</option>\r\n                                          <option value='1'>1 - Poor</option>\r\n                                          <option value='2'>2 - Fair</option>\r\n                                          <option value='3'>3 - Good</option>\r\n                                          <option value='4'>4 - Very Good</option>\r\n                                          <option value='5'>5 - Excellent</option>\r\n                                      </Form.Control>\r\n                                  </Form.Group>\r\n                                  <Form.Group controlId='comment'>\r\n                                    <Form.Label>Comment</Form.Label>\r\n                                    <Form.Control as='textarea' row='3' value={comment} onChange={(e) => setComment(e.target.value)}>\r\n                                    </Form.Control>\r\n                                  </Form.Group>\r\n                                  <br />\r\n                                  <Button type='submit' variant='primary'>\r\n                                      Submit\r\n                                  </Button>\r\n                              </Form>\r\n                          )\r\n                          : <Message>Please <Link to='/login'>Sign In</Link> to post a Review</Message>}\r\n                      </ListGroup.Item>\r\n                   </ListGroup>\r\n               </Col>\r\n          </Row>\r\n          </>\r\n            )}            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProductScreens\r\n"]},"metadata":{},"sourceType":"module"}